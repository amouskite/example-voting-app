pipeline {
    agent any
	    
    stages {
        stage('Build') {
            when{
              changeset "**/result/**"
            }
            steps {
                echo 'Compiling result app'
                dir('result'){
                  nodejs(nodeJSInstallationName: 'node 8.9.0') {
                    sh 'npm install'
                  }
		}
            }
        }
        stage('Test') {
	    when{
              changeset "**/result/**"
            }
            steps {
                echo 'Testing result app'
                dir('result'){
                  nodejs(nodeJSInstallationName: 'node 8.9.0') {
                    sh 'mvn clean test'
                  }
		}
            }
        }
    }
    post{
        always{ 
            echo "Pipeline successfully completed"
        }
    }
}
